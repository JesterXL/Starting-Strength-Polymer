<link rel="import" href="common-styles.html">

<dom-module id="app-view">

  <template>

    <style include="common-styles"></style>
    
    <paper-drawer-panel>

      <div drawer class="layout vertical scrollable">
        <paper-item>Today</paper-item>
      </div>

      <div main>
        <paper-header-panel class="flex">
          <paper-toolbar>
              <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
                  <div class="title">{{getTitle(breadcrumbs)}}</div>
              <paper-icon-button icon="more-vert" on-tap="moreAction"></paper-icon-button>
          </paper-toolbar>

          <iron-pages selected="{{selectedPageIndex}}">
              <today-view on-exerciseselected="onShowExercise"></today-view>
              <exercise-view exercise="{{currentExercise}}"></exercise-view>
          </iron-pages>
        </paper-header-panel>
      </div>

      </paper-drawer-panel>

  </template>

  <script>

    Polymer({
      is: "app-view",

      behaviors: [
        Polymer.NeonAnimationRunnerBehavior
      ],

      properties: {
        selectedPageIndex: {
          type: Number,
          value: 0
        },

        breadcrumbs: {
          type: Array,
          value: ['Starting Strength']
        },

        currentExercise: {
          type: Object,
          value: null
        }
      },

      getTitle: function(breadcrumbs)
      {
        return breadcrumbs.join(" > ")
      },

      onShowExercise: function(event, exercise)
      {
        console.log("app-view::onShowExercise");
        this.currentExercise = exercise;
        this.selectedPageIndex = 1;
        var list = _.toArray(this.breadcrumbs);
        list.push(exercise.name);
        this.breadcrumbs = list;
      }



    });
  </script>

</dom-module>