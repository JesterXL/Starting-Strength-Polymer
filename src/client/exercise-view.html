<link rel="import" href="common-styles.html">
<link rel="import" href="set-input.html">

<dom-module id="exercise-view">

  <style>

  :host{
    position: relative;
    display: inline-block;
    padding: 12px;
  }

  </style>
  
  <template>
    
    <style include="common-styles"></style>

    <div class="layout vertical">

      <h2>{{exercise.name}}</h2>

      <template is="dom-repeat" items="{{exercise.sets}}">
        <set-input current-set="{{item}}"></set-input>
      </template>

      <div class="layout horizontal">
        <paper-fab icon="add" on-tap="onAddSet"></paper-fab>
        <div class="flex"></div>
      </div>

      <div class="layout horizontal">
        <div class="flex"></div>
        <paper-button on-tap="onSave">Save</paper-button>
      </div>

    </div>
    

  </template>

  <script>

    Polymer({
      is: "exercise-view",

      behaviors: [
        Polymer.NeonAnimationRunnerBehavior
      ],

      properties: {

        exercise: {
          type: Object,
          value: null
        }
      },

      // _onExerciseChanged: function(newValue, oldValue)
      // {
      //   console.log("exercise-view::_onExerciseChanged:", newValue);
      // },

      onAddSet: function()
      {
        var previousSet = this.exercise.sets[this.exercise.sets.length - 1];
        var newSet = {
          reps: 0,
          weight: previousSet.weight,
          goalReps: previousSet.goalReps,
          goalWeight: previousSet.goalWeight
        };
        this.push('exercise.sets', newSet);

      },

      onSave: function()
      {
        this.fire('save');
      }

    });
  </script>

</dom-module>